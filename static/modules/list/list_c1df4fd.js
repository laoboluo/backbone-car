define("static/modules/list/list",function(t,e,i){var n=Backbone.View.extend({events:{"tap .search span":"showSearchView","tap .type li":"showTypeView","tap .go-top":"goTop"},tpl:_.template('<a href="#layer/<%=id%>"><img style="<%=style%>" src="<%=url%>" alt="" /></a>'),leftHeight:0,rightHeight:0,initialize:function(){var t=this;this.initDOM(),this.listenTo(this.collection,"add",function(t){this.render(t)}),$(window).on("scroll",function(){$("body").height()<$(window).scrollTop()+$(window).height()+200&&t.getData(),t.showHideGoTop()}),this.getData(),this.touchmovepic()},goTop:function(){window.scrollTo(0,0)},showHideGoTop:function(){$(window).scrollTop()>300?this.$el.find(".go-top").show():this.$el.find(".go-top").hide()},getData:function(){this.collection.fetchData()},initDOM:function(){this.leftContainer=this.$el.find(".left-container"),this.rightContainer=this.$el.find(".right-container")},render:function(t){var e=t.get("viewHeight"),i={id:t.get("id"),url:t.get("url"),style:"width: "+t.get("viewWidth")+";height: "+e+";"},n=this.tpl,o=n(i);this.leftHeight>this.rightHeight?this.renderRight(o,e):this.renderLeft(o,e)},renderRight:function(t,e){this.rightContainer.append(t),this.rightHeight+=e+6},renderLeft:function(t,e){this.leftContainer.append(t),this.leftHeight+=e+6},getSearchValue:function(){return this.$el.find(".search input").val()},checkInputValue:function(t){return/^\s*$/.test(t)?(alert("请输入搜索内容！"),!1):!0},searchCollectionByKey:function(t,e){return this.collection.filter(function(i){return"type"===e?i.get("type")==t:i.get("title").indexOf(t)>-1})},clearView:function(){this.leftContainer.html(""),this.rightContainer.html(""),this.leftHeight=0,this.rightHeight=0},resetView:function(t){for(var e=0;e<t.length;e++)this.render(t[e])},showSearchView:function(){var t=this.getSearchValue();if(this.checkInputValue(t)){t=t.replace(/^\s+|\s+$/g,"");var e=this.searchCollectionByKey(t);this.clearView(),this.resetView(e)}},getDOMId:function(t){return $(t).attr("data-id")},showTypeView:function(t){var e=this.getDOMId(t.target);console.log(t.target,111);var i=this.searchCollectionByKey(e,"type");this.clearView(),this.resetView(i),this.$el.find(t.target).attr("class","cur").siblings().removeClass("cur")},touchmovepic:function(){var t,e,i=document.getElementById("list"),n=document.getElementById("type"),o=0,s=0,r=0,h=document.documentElement.clientWidth;i.addEventListener("touchstart",function(e){e.preventDefault();var i=e.touches[0];t=i.clientX},!0),i.addEventListener("touchmove",function(i){var h=i.touches[0];n.style.transition="none",s=h.clientX-o,o=h.clientX;var l=h.clientX-t;e=r+l,n.style.transform="translateX("+e+"px)"},!0),i.addEventListener("touchend",function(t){t.touches[0];r=e;var i=r+2*s;i>0?(n.style.transition="all 0.6s cubic-bezier(.34,1.81,.51,1.68) 0s",i=0):-760+h>i?(console.log(i,1111),n.style.transition="all 0.6s cubic-bezier(.34,1.81,.51,1.68) 0s",i=-1390+h):n.style.transition="all 0.6s cubic-bezier(0.2, 1.05, 0.58, 1.01) 0s",n.style.transform="translateX("+i+"px)",r=i},!0)}});i.exports=n});